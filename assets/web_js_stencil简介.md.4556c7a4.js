import{_ as s,o as n,c as a,R as l}from"./chunks/framework.bf742a9e.js";const b=JSON.parse('{"title":"stencil 简介","description":"","frontmatter":{},"headers":[],"relativePath":"web/js/stencil简介.md","filePath":"web/js/stencil简介.md"}'),e={name:"web/js/stencil简介.md"},o=l(`<h1 id="stencil-简介" tabindex="-1">stencil 简介 <a class="header-anchor" href="#stencil-简介" aria-label="Permalink to &quot;stencil 简介&quot;">​</a></h1><p>stencil 是一个生成 <strong>Web Component</strong> 的<strong>编译器</strong>，但是其具有自己的特殊语法，使用 stencil 生成的组件可<strong>跨框架</strong>和<strong>在 html 中使用</strong>。</p><p>其号称结合了最流行框架(angular、react、vue)中的最好的理念，具备这些特点：</p><ul><li>TypeScript (依赖注入、装饰器等 angular 的一些语法)</li><li>Virtual DOM (React)</li><li>JSX (React)</li><li>Reactive data-binding (React)</li><li>Async rendering (React)</li><li>Static Site generation (SSG)</li><li>Live reload 热刷新，开发时很有用</li><li>自动优化构建产物</li><li>API 很小</li></ul><p>stencil 的构建产物已经做了<strong>懒加载</strong>和<strong>按需加载</strong>，所以具有<strong>较高的性能</strong>。</p><p>stencil 除了创建 Web Component，还能构建 WPA 的站点。</p><p>一个简单的 stencil 组件：</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Component</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Prop</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">h</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@stencil/core</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Component</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tag</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my-name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">styleUrl</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my-name.scss</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyName</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Prop</span><span style="color:#A6ACCD;">() </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Prop</span><span style="color:#A6ACCD;">() </span><span style="color:#F07178;">last</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        Hello, my name is </span><span style="color:#89DDFF;">{this.</span><span style="color:#A6ACCD;">first</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{this.</span><span style="color:#A6ACCD;">last</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>使用：</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">my-name</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">first</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Stencil</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">last</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">JS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">my-name</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="stencil-出现的动机" tabindex="-1">stencil 出现的动机 <a class="header-anchor" href="#stencil-出现的动机" aria-label="Permalink to &quot;stencil 出现的动机&quot;">​</a></h2><p><a href="https://ionicframework.com/" target="_blank" rel="noreferrer">ionic 团队</a>为了实现更好的创建 component，且 component 能跨框架和无框架使用，开发了 stencil，2017 年 8 月发布第一个版本。</p><blockquote><p>Stencil&#39;s primary goal is to remove the need for components to be written using a specific framework&#39;s API.</p></blockquote><blockquote><p>Stencil&#39;s integration with different frameworks is currently a work <strong>in progress</strong>. As Stencil matures, the goal is to make it easy to write standard web components which will compile to various output targets.</p></blockquote><blockquote><p>实际使用时，发现三大流行框架（react、vue angular）对 stencil 生成的 web component 的支持并没有和其宣传的那么好，坑比较多，集成方案很少。</p></blockquote><blockquote><p>本人测试 react17、vue2、vue3 之后，发现 vue2 对 stencil 的支持最好，配置最简单。</p></blockquote><p>实际上，网站关于 stencil 的资料非常少，stackoverflow 上 stencil 相关的问题才 4588 条，vue 相关的 11 万加，react 和 angular 更多了。</p><blockquote><p>另外，stencil 相关文档和周边库、组件等也<strong>很少</strong>，想采用它来编写跨裤架的 web component，还是不推荐。</p></blockquote><blockquote><p>那在纯 html 中使用 stencil 构建的 web component 呢？</p></blockquote><p><strong>不推荐</strong>。比如支持传递 object 和 array 等复杂数据到 web component 内部，还需要配合 jquery 等 DOM 操作库，让前端开发回到 jquery 时代。</p><blockquote><p>单独使用 stencil 创建<strong>单页应用</strong>可以吗？</p></blockquote><p>可行，不推荐。</p><p>周边库支持不好，文档糟糕，社区不活跃，遇到问题，难以找到解决方案。</p><blockquote><p>什么时候需要使用 stencil?</p></blockquote><p>使用 ionic 技术开发 ios、android 应用，可以学习它。</p><h2 id="为何要学习-stencil-呢" tabindex="-1">为何要学习 stencil 呢？ <a class="header-anchor" href="#为何要学习-stencil-呢" aria-label="Permalink to &quot;为何要学习 stencil 呢？&quot;">​</a></h2><p>入职的新公司采用 stencil 开发，需要适应新技术，老项目还有其他问题，我们也计划采用新的技术重构这个维护了 4 年多的系统，所以有必要了解 stencil。</p>`,27),p=[o];function t(r,c,i,D,y,F){return n(),a("div",null,p)}const m=s(e,[["render",t]]);export{b as __pageData,m as default};
